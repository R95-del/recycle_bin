<div class="pagination-wrapper">
  <div class="pagination">
    <% if total_pages > 1 %>
      <% if current_page > 1 %>
        <%= link_to "« First", request.params.merge(page: 1) %>
        <%= link_to "‹ Prev", request.params.merge(page: current_page - 1) %>
      <% else %>
        <span class="disabled">« First</span>
        <span class="disabled">‹ Prev</span>
      <% end %>

      <% (1..total_pages).each do |page| %>
        <% if page == current_page %>
          <span class="current"><%= page %></span>
        <% else %>
          <%= link_to page, request.params.merge(page: page) %>
        <% end %>
      <% end %>

      <% if current_page < total_pages %>
        <%= link_to "Next ›", request.params.merge(page: current_page + 1) %>
        <%= link_to "Last »", request.params.merge(page: total_pages) %>
      <% else %>
        <span class="disabled">Next ›</span>
        <span class="disabled">Last »</span>
      <% end %>
    <% end %>
  </div>

  <div class="per-page">
    <span>Items per page:</span>
    <% [25, 50, 100].each do |num| %>
      <% if num == per_page %>
        <span class="current"><%= num %></span>
      <% else %>
        <%= link_to num, request.params.merge(per_page: num), class: "per-page-link" %>
      <% end %>
    <% end %>
  </div>
</div>